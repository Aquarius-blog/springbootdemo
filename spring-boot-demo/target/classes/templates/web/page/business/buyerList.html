<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>买家列表</title>
<#include "/common.html">
</head>
<body>
<div id="buyerList">
	<table id="table"></table>
</div>
<script type="text/javascript">
	var vue = new Vue({
		 el : '#buyerList',
         data : {
             title : "项目列表",//数据头部细信息*
             /**
              * 数据显示列
              */
             isEye : false,//是否查看*
             //基础数据展示*
         },
         //数据方法
         methods : {
             //初始化TableColumns
             getModelColumns : function(menuTable, refreshEvent){
            	//记录页面bootstrap-table全局变量$table，方便应用
		            $('#table').bootstrapTable({
		                url: "/buyer/listData",                      //请求后台的URL（*）
		                method: 'GET',                      //请求方式（*）
		                //toolbar: '#toolbar',              //工具按钮用哪个容器
		                striped: true,                      //是否显示行间隔色
		                cache: false,                       //是否使用缓存，默认为true，所以一般情况下需要设置一下这个属性（*）
		                pagination: true,                   //是否显示分页（*）
		                sortable: true,                     //是否启用排序
		                sortOrder: "asc",                   //排序方式
		                sidePagination: "server",           //分页方式：client客户端分页，server服务端分页（*）
		                pageNumber: 1,                      //初始化加载第一页，默认第一页,并记录
		                pageSize: 10,                     //每页的记录行数（*）
		                pageList: [10, 25, 50, 100],        //可供选择的每页的行数（*）
		                search: false,                      //是否显示表格搜索
		                strictSearch: true,
		                showColumns: true,                  //是否显示所有的列（选择显示的列）
		                showRefresh: true,                  //是否显示刷新按钮
		                minimumCountColumns: 2,             //最少允许的列数
		                clickToSelect: true,                //是否启用点击选中行
		                //height: 500,                      //行高，如果没有设置height属性，表格自动根据记录条数觉得表格高度
		                uniqueId: "ID",                     //每一行的唯一标识，一般为主键列
		                showToggle: true,                   //是否显示详细视图和列表视图的切换按钮
		                cardView: false,                    //是否显示详细视图
		                detailView: false,                  //是否显示父子表
		                //得到查询的参数
		                queryParams : function (params) {
		                    //这里的键的名字和控制器的变量名必须一致，这边改动，控制器也需要改成一样的
		                    var temp = {   
		                        rows: params.limit,                         //页面大小
		                        page: (params.offset / params.limit) + 1,   //页码
		                        sort: params.sort,      //排序列名  
		                        sortOrder: params.order //排位命令（desc，asc） 
		                    };
		                    return temp;
		                },
		                columns: [{
		                    checkbox: true,  
		                    visible: true                  //是否显示复选框  
		                }, {
		                    field: 'name',
		                    title: '姓名',
		                    sortable: true
		                }, {
		                    field: 'listId',
		                    title: '手机',
		                    sortable: true
		                }, {
		                    field: 'Email',
		                    title: '邮箱',
		                    sortable: true,
		                    formatter: emailFormatter
		                }, {
		                    field: 'Homepage',
		                    title: '主页',
		                    formatter: linkFormatter
		                }, {
		                    field: 'Hobby',
		                    title: '兴趣爱好'
		                }, {
		                    field: 'Gender',
		                    title: '性别',
		                    sortable: true
		                }, {
		                    field: 'Age',
		                    title: '年龄'
		                }, {
		                    field: 'Height',
		                    title: '身高'
		                }, {
		                    field: 'Note',
		                    title: '备注'
		                }, {
		                    field:'ID',
		                    title: '操作',
		                    width: 120,
		                    align: 'center',
		                    valign: 'middle',
		                    formatter: actionFormatter
		                }, ],
		                onLoadSuccess: function () {
		                },
		                onLoadError: function () {
		                    showTips("数据加载失败！");
		                },
		                onDblClickRow: function (row, $element) {
		                    var id = row.ID;
		                    EditViewById(id, 'view');
		                },
		            });
             }
         },
         //创建完毕状态
         created : function(){
             this.getModelColumns("menuTable", "projectListTableRefresh");
         }
	})
	
	//连接字段格式化
    function linkFormatter(value, row, index) {                
        return "<a href='" + value + "' title='单击打开连接' target='_blank'>" + value + "</a>";
    }
    //Email字段格式化
    function emailFormatter(value, row, index) {
        return "<a href='mailto:" + value + "' title='单击打开连接'>" + value + "</a>";
    }
    //性别字段格式化
    function sexFormatter(value) {
        if (value == "女") { color = 'Red'; }
        else if (value == "男") { color = 'Green'; }
        else { color = 'Yellow'; }

        return '<div  style="color: ' + color + '">' + value + '</div>';
    }
	//操作栏的格式化
     function actionFormatter(value, row, index) {
         var id = value;
         var result = "";
         result += "<a href='javascript:;' class='btn btn-xs green' onclick=\"EditViewById('" + id + "', view='view')\" title='查看'><span class='glyphicon glyphicon-search'></span></a>";
         result += "<a href='javascript:;' class='btn btn-xs blue' onclick=\"EditViewById('" + id + "')\" title='编辑'><span class='glyphicon glyphicon-pencil'></span></a>";
         result += "<a href='javascript:;' class='btn btn-xs red' onclick=\"DeleteByIds('" + id + "')\" title='删除'><span class='glyphicon glyphicon-remove'></span></a>";

         return result;
     }
</script>
</body>
</html>